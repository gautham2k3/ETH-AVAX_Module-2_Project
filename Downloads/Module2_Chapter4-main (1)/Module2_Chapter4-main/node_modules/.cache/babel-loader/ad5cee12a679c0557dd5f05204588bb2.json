{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BommaliGauthamnaidu\\\\Downloads\\\\Module2_Chapter4-main (1)\\\\Module2_Chapter4-main\\\\src\\\\BankApp.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport styles from './Bank.module.css';\nimport simple_token_abi from './Contracts/bank_app_abi.json';\nimport Interactions from './Interactions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BankApp = () => {\n  _s();\n\n  // deploy simple token contract and paste deployed contract address here. This value is local ganache chain\n  let contractAddress = '0x5FbDB2315678afecb367f032d93F642f64180aa3';\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [connButtonText, setConnButtonText] = useState('Connect Wallet');\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [transferHash, setTransferHash] = useState(null);\n  const [checkAcc, setCheckAcc] = useState(\"false\");\n  const [accStatus, setAccStatus] = useState(\"\");\n  const [accbalance, setAccBalance] = useState(\"\");\n\n  const connectWalletHandler = () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      window.ethereum.request({\n        method: 'eth_requestAccounts'\n      }).then(result => {\n        accountChangedHandler(result[0]);\n        setConnButtonText('Wallet Connected');\n      }).catch(error => {\n        setErrorMessage(error.message);\n      });\n    } else {\n      console.log('Need to install MetaMask');\n      setErrorMessage('Please install MetaMask browser extension to interact');\n    }\n  }; // update account, will cause component re-render\n\n\n  const accountChangedHandler = newAccount => {\n    setDefaultAccount(newAccount);\n    updateEthers();\n  };\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid-use of the application\n    window.location.reload();\n  }; // listen for account changes\n\n\n  window.ethereum.on('accountsChanged', accountChangedHandler);\n  window.ethereum.on('chainChanged', chainChangedHandler);\n\n  const updateEthers = () => {\n    let tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n    setProvider(tempProvider);\n    let tempSigner = tempProvider.getSigner();\n    setSigner(tempSigner);\n    let tempContract = new ethers.Contract(contractAddress, simple_token_abi, tempSigner);\n    setContract(tempContract);\n  };\n\n  const createAccount = async () => {\n    let txt = await contract.createAcc();\n    console.log(txt);\n    setAccStatus(\"Your Account is created\");\n  };\n\n  const checkAccountExists = async () => {\n    let txt = await contract.accountExists();\n\n    if (txt === true) {\n      setCheckAcc(\"true\");\n    }\n  };\n\n  const AccountBalance = async () => {\n    let txt = await contract.accountBalance();\n    let balanceNumber = txt.toNumber();\n    console.log(balanceNumber);\n    setAccBalance('' + balanceNumber);\n  };\n\n  const DepositBalance = async e => {\n    e.preventDefault();\n    let depositAmount = e.target.depositAmount.value;\n    let txt = await contract.deposit({\n      value: depositAmount\n    });\n  };\n\n  const transferHandler = async e => {\n    e.preventDefault();\n    let transferAmount = e.target.sendAmount.value;\n    let recieverAddress = e.target.recieverAddress.value;\n    let txt = await contract.transferEther(recieverAddress, transferAmount);\n    setTransferHash(\"Transfer confirmation hash: \" + txt.hash);\n  };\n\n  const WithdrawBalance = async e => {\n    e.preventDefault();\n    let withdrawAmount = e.target.withdrawAmount.value;\n    let txt = await contract.withdraw(withdrawAmount);\n    console.log(txt);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: styles.heading,\n      children: \"Bank Dapp - Manage Accounts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.connectButton,\n      onClick: connectWalletHandler,\n      children: connButtonText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.walletCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.walletAddress,\n          children: [\"Address: \", defaultAccount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.balanceButton,\n          onClick: AccountBalance,\n          style: {\n            margin: '0 auto'\n          },\n          children: \"Check Account Balance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.balanceLabel,\n          children: [\"Balance in the Bank: \", accbalance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.errorMessage,\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.interactionsCard,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: styles.interactionsHeading,\n          children: \"Account Actions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.actionButton,\n          onClick: createAccount,\n          children: \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.actionButton,\n          onClick: checkAccountExists,\n          children: \"Check Account Exists\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: styles.accountStatus,\n          children: [\"Account Status: \", checkAcc]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: transferHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.transferHeading,\n          children: \"Transfer Money\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"recieverAddress\",\n            className: styles.formLabel,\n            children: \"Recipient Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"recieverAddress\",\n            className: styles.formInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"sendAmount\",\n            className: styles.formLabel,\n            children: \"Transfer Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"sendAmount\",\n            min: \"0\",\n            step: \"1\",\n            className: styles.formInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.actionButton,\n          children: \"Transfer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.transferHash,\n          children: transferHash\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: DepositBalance,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.depositHeading,\n          children: \"Deposit Money\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"depositAmount\",\n            className: styles.formLabel,\n            children: \"Deposit Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"depositAmount\",\n            min: \"0\",\n            step: \"1\",\n            className: styles.formInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.actionButton,\n          children: \"Deposit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: WithdrawBalance,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.withdrawHeading,\n          children: \"Withdraw Money\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.formGroup,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"withdrawAmount\",\n            className: styles.formLabel,\n            children: \"Withdraw Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            id: \"withdrawAmount\",\n            min: \"0\",\n            step: \"1\",\n            className: styles.formInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles.actionButton,\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BankApp, \"XAlnTf6oC4Y3rTZNtz/atZF5TCM=\");\n\n_c = BankApp;\nexport default BankApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"BankApp\");","map":{"version":3,"sources":["C:/Users/BommaliGauthamnaidu/Downloads/Module2_Chapter4-main (1)/Module2_Chapter4-main/src/BankApp.js"],"names":["React","useState","useEffect","ethers","styles","simple_token_abi","Interactions","BankApp","contractAddress","errorMessage","setErrorMessage","defaultAccount","setDefaultAccount","connButtonText","setConnButtonText","provider","setProvider","signer","setSigner","contract","setContract","transferHash","setTransferHash","checkAcc","setCheckAcc","accStatus","setAccStatus","accbalance","setAccBalance","connectWalletHandler","window","ethereum","isMetaMask","request","method","then","result","accountChangedHandler","catch","error","message","console","log","newAccount","updateEthers","chainChangedHandler","location","reload","on","tempProvider","providers","Web3Provider","tempSigner","getSigner","tempContract","Contract","createAccount","txt","createAcc","checkAccountExists","accountExists","AccountBalance","accountBalance","balanceNumber","toNumber","DepositBalance","e","preventDefault","depositAmount","target","value","deposit","transferHandler","transferAmount","sendAmount","recieverAddress","transferEther","hash","WithdrawBalance","withdrawAmount","withdraw","heading","connectButton","walletCard","walletAddress","balanceButton","margin","balanceLabel","interactionsCard","interactionsHeading","actionButton","accountStatus","transferHeading","formGroup","formLabel","formInput","depositHeading","withdrawHeading"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport styles from './Bank.module.css';\nimport simple_token_abi from './Contracts/bank_app_abi.json';\nimport Interactions from './Interactions';\n\nconst BankApp = () => {\n  // deploy simple token contract and paste deployed contract address here. This value is local ganache chain\n  let contractAddress = '0x5FbDB2315678afecb367f032d93F642f64180aa3';\n\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [defaultAccount, setDefaultAccount] = useState(null);\n  const [connButtonText, setConnButtonText] = useState('Connect Wallet');\n\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n\n  const [transferHash, setTransferHash] = useState(null);\n  const [checkAcc, setCheckAcc] = useState(\"false\");\n  const [accStatus, setAccStatus] = useState(\"\");\n  const [accbalance, setAccBalance] = useState(\"\");\n\n  const connectWalletHandler = () => {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      window.ethereum.request({ method: 'eth_requestAccounts' })\n        .then(result => {\n          accountChangedHandler(result[0]);\n          setConnButtonText('Wallet Connected');\n        })\n        .catch(error => {\n          setErrorMessage(error.message);\n        });\n    } else {\n      console.log('Need to install MetaMask');\n      setErrorMessage('Please install MetaMask browser extension to interact');\n    }\n  }\n\n  // update account, will cause component re-render\n  const accountChangedHandler = (newAccount) => {\n    setDefaultAccount(newAccount);\n    updateEthers();\n  }\n\n  const chainChangedHandler = () => {\n    // reload the page to avoid any errors with chain change mid-use of the application\n    window.location.reload();\n  }\n\n  // listen for account changes\n  window.ethereum.on('accountsChanged', accountChangedHandler);\n  window.ethereum.on('chainChanged', chainChangedHandler);\n\n  const updateEthers = () => {\n    let tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n    setProvider(tempProvider);\n\n    let tempSigner = tempProvider.getSigner();\n    setSigner(tempSigner);\n\n    let tempContract = new ethers.Contract(contractAddress, simple_token_abi, tempSigner);\n    setContract(tempContract);\n  }\n\n  const createAccount = async () => {\n    let txt = await contract.createAcc();\n    console.log(txt);\n    setAccStatus(\"Your Account is created\");\n  }\n\n  const checkAccountExists = async () => {\n    let txt = await contract.accountExists();\n    if (txt === true) {\n      setCheckAcc(\"true\");\n    }\n  }\n\n  const AccountBalance = async () => {\n    let txt = await contract.accountBalance();\n    let balanceNumber = txt.toNumber();\n    console.log(balanceNumber);\n    setAccBalance('' + balanceNumber);\n  }\n\n  const DepositBalance = async (e) => {\n    e.preventDefault();\n    let depositAmount = e.target.depositAmount.value;\n    let txt = await contract.deposit({\n      value: depositAmount\n    });\n  }\n\n  const transferHandler = async (e) => {\n    e.preventDefault();\n    let transferAmount = e.target.sendAmount.value;\n    let recieverAddress = e.target.recieverAddress.value;\n    let txt = await contract.transferEther(recieverAddress, transferAmount);\n    setTransferHash(\"Transfer confirmation hash: \" + txt.hash);\n  }\n\n  const WithdrawBalance = async (e) => {\n    e.preventDefault();\n    let withdrawAmount = e.target.withdrawAmount.value;\n    let txt = await contract.withdraw(withdrawAmount);\n    console.log(txt);\n  }\n\n  return (\n    <div>\n      <h2 className={styles.heading}>Bank Dapp - Manage Accounts</h2>\n      <button className={styles.connectButton} onClick={connectWalletHandler}>\n        {connButtonText}\n      </button>\n\n      <div className={styles.walletCard}>\n        <div>\n          <h3 className={styles.walletAddress}>Address: {defaultAccount}</h3>\n        </div>\n\n        <div>\n  <button className={styles.balanceButton} onClick={AccountBalance} style={{ margin: '0 auto' }}>\n    Check Account Balance\n  </button>\n  <h3 className={styles.balanceLabel}>Balance in the Bank: {accbalance}</h3>\n       </div>\n\n\n        {errorMessage && <div className={styles.errorMessage}>{errorMessage}</div>}\n      </div>\n\n      <div className={styles.interactionsCard}>\n        <div>\n          <h4 className={styles.interactionsHeading}>Account Actions</h4>\n          <button className={styles.actionButton} onClick={createAccount}>\n            Create Account\n          </button>\n          <button className={styles.actionButton} onClick={checkAccountExists}>\n            Check Account Exists\n          </button>\n          <h4 className={styles.accountStatus}>Account Status: {checkAcc}</h4>\n        </div>\n\n        <form onSubmit={transferHandler}>\n          <h3 className={styles.transferHeading}>Transfer Money</h3>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"recieverAddress\" className={styles.formLabel}>Recipient Address:</label>\n            <input type=\"text\" id=\"recieverAddress\" className={styles.formInput} />\n          </div>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"sendAmount\" className={styles.formLabel}>Transfer Amount:</label>\n            <input type=\"number\" id=\"sendAmount\" min=\"0\" step=\"1\" className={styles.formInput} />\n          </div>\n          <button type=\"submit\" className={styles.actionButton}>Transfer</button>\n          <div className={styles.transferHash}>{transferHash}</div>\n        </form>\n\n        <form onSubmit={DepositBalance}>\n          <h3 className={styles.depositHeading}>Deposit Money</h3>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"depositAmount\" className={styles.formLabel}>Deposit Amount:</label>\n            <input type=\"number\" id=\"depositAmount\" min=\"0\" step=\"1\" className={styles.formInput} />\n          </div>\n          <button type=\"submit\" className={styles.actionButton}>Deposit</button>\n        </form>\n\n        <form onSubmit={WithdrawBalance}>\n          <h3 className={styles.withdrawHeading}>Withdraw Money</h3>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"withdrawAmount\" className={styles.formLabel}>Withdraw Amount:</label>\n            <input type=\"number\" id=\"withdrawAmount\" min=\"0\" step=\"1\" className={styles.formInput} />\n          </div>\n          <button type=\"submit\" className={styles.actionButton}>Withdraw</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default BankApp;\n"]},"metadata":{},"sourceType":"module"}